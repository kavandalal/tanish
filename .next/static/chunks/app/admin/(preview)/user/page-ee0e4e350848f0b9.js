(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[666],{9486:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(4293);let r=(0,a.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},5877:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(4293);let r=(0,a.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},9238:function(e,t,s){Promise.resolve().then(s.bind(s,3556))},3556:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(4357),r=s(4185),l=s(6620),n=s(9147),i=s(8769),o=s(7094),d=s(7684),c=s(9486),u=s(5877),m=s(4293);let f=(0,m.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var p=s(111),v=s.n(p),x=s(6439),h=s(8895);function j(){let{toast:e}=(0,o.pm)(),{register:t,watch:s,handleSubmit:m,setValue:p,formState:{errors:j},reset:g}=(0,h.cI)(),[b,N]=(0,x.useState)({open:!1,mode:"add",id:"",data:{name:"",email:"",phone:"",side:"",role:""}}),[y,w]=(0,x.useState)(!1),[k,S]=(0,x.useState)([]),T=(0,x.useCallback)(async()=>{var t,s,a,r,l,n,i,o,c;try{let n=await d.Z.get("/api/user");if(!(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.ok))return e({variant:"destructive",title:null==n?void 0:null===(l=n.data)||void 0===l?void 0:null===(r=l.errors)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.message}),!1;return S(null==n?void 0:null===(s=n.data)||void 0===s?void 0:s.packet),!0}catch(s){let t=null==s?void 0:null===(c=s.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:null===(i=o.errors)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.message;return console.error(t),e({variant:"destructive",title:t||"Something went wrong"}),!1}},[]);(0,x.useEffect)(()=>{T()},[y,T]);let A=function(){let{mode:e="add",id:t="",data:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(s=>({...s,open:!0,mode:e,id:t})),"edit"===e&&(p("name",null==s?void 0:s.name),p("email",null==s?void 0:s.email),p("phone",null==s?void 0:s.phone),p("side",null==s?void 0:s.side),p("role",null==s?void 0:s.role))},_=e=>{let{status:t=!1}=e;t&&w(e=>!e),N(e=>({...e,open:!1})),g()},R=async t=>{var s,a,r,l,n,i,o,c;let u={...t,userRef:null==b?void 0:b.id};try{let t=await d.Z.patch("/api/user",u);if(!(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.ok))return e({variant:"destructive",title:null==t?void 0:null===(l=t.data)||void 0===l?void 0:null===(r=l.errors)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.message}),!1;return e({description:"Successfully Updated Data"}),_({status:!0}),!0}catch(s){let t=null==s?void 0:null===(c=s.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:null===(i=o.errors)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.message;return console.error(t),e({variant:"destructive",title:t}),!1}},D=async t=>{var s,a,r,l,n,i,o,c;let{id:u}=t;try{let t=await d.Z.delete("/api/admin/user/".concat(u));if(!(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.ok))return e({variant:"destructive",title:null==t?void 0:null===(l=t.data)||void 0===l?void 0:null===(r=l.errors)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.message}),!1;return e({description:"Successfully deleted user"}),w(e=>!e),!0}catch(s){let t=null==s?void 0:null===(c=s.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:null===(i=o.errors)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.message;return console.error(t),e({variant:"destructive",title:t}),!1}};return(0,a.jsxs)("div",{className:"grid gap-4 ",children:[(0,a.jsx)(n.Vq,{open:b.open,onOpenChange:e=>e?N(t=>({...t,open:e})):_({status:!1}),children:(0,a.jsxs)(n.cZ,{className:"md:max-w-[555px]",onPointerDownOutside:e=>{e.preventDefault()},children:[(0,a.jsx)(n.fK,{children:(0,a.jsxs)(n.$N,{children:["add"===b.mode?"Add":"Edit"," User"]})}),(0,a.jsxs)("form",{children:[(0,a.jsxs)("div",{className:"grid gap-10 h-96 overflow-auto px-4 mb-4 pt-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...t("name",{required:!0}),placeholder:"Full Name*",className:r.hG}),(0,a.jsx)("label",{className:r.yI,children:"Name*"}),j.name&&(0,a.jsx)("p",{className:"text-destructive",children:"Name is required."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"email",...t("email",{required:!0}),placeholder:"Email*",className:r.hG}),(0,a.jsx)("label",{className:r.yI,children:"Email*"}),j.email&&(0,a.jsx)("p",{className:"text-destructive",children:"Email is required."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...t("phone",{required:!0}),placeholder:"Phone",className:r.hG}),(0,a.jsx)("label",{className:r.yI,children:"Phone"}),j.phone&&(0,a.jsx)("p",{className:"text-destructive",children:"Phone is required."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{...t("side"),className:r.hG,children:[(0,a.jsx)("option",{value:"bride",children:"Ladkiwale (Bride)"}),(0,a.jsx)("option",{value:"groom",children:"Ladkewale (Groom)"})]}),(0,a.jsx)("label",{className:r.yI,children:"You belong from"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{...t("role"),className:r.hG,children:[(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]}),(0,a.jsx)("label",{className:r.yI,children:"Role"})]})]}),(0,a.jsx)(n.cN,{children:(0,a.jsxs)(l.z,{type:"submit",onClick:m(R),children:["add"===b.mode?"Add":"Update"," User"]})})]})]})}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"flex justify-between my-6",children:[(0,a.jsx)("h4",{className:"font-bold text-2xl",children:"Admin > Users"}),(0,a.jsx)("div",{})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(i.iA,{children:[(0,a.jsx)(i.xD,{children:(0,a.jsxs)(i.SC,{children:[(0,a.jsx)(i.ss,{className:"w-[100px]",children:"Index"}),(0,a.jsx)(i.ss,{children:"Profile"}),(0,a.jsx)(i.ss,{children:"Name"}),(0,a.jsx)(i.ss,{children:"Email"}),(0,a.jsx)(i.ss,{children:"Phone"}),(0,a.jsx)(i.ss,{children:"Side"}),(0,a.jsx)(i.ss,{children:"Role"}),(0,a.jsx)(i.ss,{className:"text-right",children:"Action"})]})}),(0,a.jsx)(i.RM,{children:(null==k?void 0:k.length)>0&&(null==k?void 0:k.map((t,s)=>(0,a.jsxs)(i.SC,{children:[(0,a.jsxs)(i.pj,{children:[s+1," "]}),(0,a.jsx)(i.pj,{children:(0,a.jsx)(v(),{href:"/profile/".concat(null==t?void 0:t._id),target:"_blank",children:(0,a.jsx)(f,{})})}),(0,a.jsx)(i.pj,{children:null==t?void 0:t.name}),(0,a.jsx)(i.pj,{children:(null==t?void 0:t.email)||""}),(0,a.jsx)(i.pj,{children:(null==t?void 0:t.phone)||""}),(0,a.jsx)(i.pj,{className:"capitalize",children:(null==t?void 0:t.side)||""}),(0,a.jsx)(i.pj,{className:"capitalize",children:(null==t?void 0:t.role)||""}),(0,a.jsx)(i.pj,{className:"text-right",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(l.z,{variant:"outline",size:"sm",className:"me-2 ",onClick:()=>A({mode:"edit",id:null==t?void 0:t._id,data:t}),children:(0,a.jsx)(c.Z,{size:16,className:"text-blue-500"})}),(0,a.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>{e({title:"Delete user ".concat(null==t?void 0:t.name),description:"Once user is deleted you wont be able to get the data again",action:(0,a.jsx)(l.z,{onClick:()=>D({id:null==t?void 0:t._id}),children:"Delete"})})},children:(0,a.jsx)(u.Z,{size:16,className:"text-destructive"})})]})})]},null==t?void 0:t._id)))})]})})]})]})}},4185:function(e,t,s){"use strict";s.d(t,{aN:function(){return n},hG:function(){return a},io:function(){return l},yI:function(){return r}});let a="peer w-full px-0.5 border-0 border-b-2 border-gray-300 placeholder-transparent focus:ring-0 focus:border-purple-600",r="absolute left-0 -top-5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-1 peer-focus:-top-5 peer-focus:text-purple-600 peer-focus:text-sm",l="Something went wrong !!!",n="https://tanish-app.s3.ap-south-1.amazonaws.com/"},6620:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(4357),r=s(6439),l=s(4924),n=s(8786),i=s(5594);let o=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:s})),ref:t,...c})});d.displayName="Button"},9147:function(e,t,s){"use strict";s.d(t,{$N:function(){return p},Be:function(){return v},Vq:function(){return o},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var a=s(4357),r=s(6439),l=s(8371),n=s(77),i=s(5594);let o=l.fC;l.xz;let d=l.h_;l.x8;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});c.displayName=l.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Pxu,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=l.Dx.displayName;let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});v.displayName=l.dk.displayName},8769:function(e,t,s){"use strict";s.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return n},pj:function(){return m},ss:function(){return u},xD:function(){return i}});var a=s(4357),r=s(6439),l=s(5594);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",s),...r})})});n.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",s),...r})});i.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...r})});o.displayName="TableBody";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})});d.displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});c.displayName="TableRow";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r})});u.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r})});m.displayName="TableCell";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...r})});f.displayName="TableCaption"},7094:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return m}});var a=s(6439);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5594:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(3501),r=s(2701);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m)((0,a.W)(t))}}},function(e){e.O(0,[545,409,956,710,759,78,381,895,478,702,431,744],function(){return e(e.s=9238)}),_N_E=e.O()}]);