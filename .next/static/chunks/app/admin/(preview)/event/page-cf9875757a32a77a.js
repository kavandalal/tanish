(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{9486:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(4293);let s=(0,l.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},5877:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(4293);let s=(0,l.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},5891:function(e,t,a){Promise.resolve().then(a.bind(a,2874))},2874:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var l=a(4357),s=a(4185),n=a(6620),r=a(9147),i=a(8769),d=a(7094),o=a(7684),c=a(2188),u=a(9486),v=a(5877),m=a(5527),p=a.n(m),f=a(111),x=a.n(f),h=a(6439),j=a(8895);function N(){let{toast:e}=(0,d.pm)(),{register:t,watch:a,handleSubmit:m,setValue:f,formState:{errors:N},reset:g}=(0,j.cI)(),[b,y]=(0,h.useState)({open:!1,mode:"add",id:"",data:{name:"",start:"",end:"",venue:"",address:"",description:"",map:"",isPrivate:!1}}),[w,k]=(0,h.useState)(!1),[D,z]=(0,h.useState)([]);(0,h.useEffect)(()=>{E()},[w]);let E=async()=>{var t,a,l,s,n,r,i,d,c,u;try{let i=await o.Z.get("/api/event?isPrivate=true");if(!(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.ok))return e({variant:"destructive",title:null==i?void 0:null===(r=i.data)||void 0===r?void 0:null===(n=r.errors)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.message}),!1;return z(null==i?void 0:null===(l=i.data)||void 0===l?void 0:null===(a=l.packet)||void 0===a?void 0:a.list),!0}catch(a){let t=null==a?void 0:null===(u=a.response)||void 0===u?void 0:null===(c=u.data)||void 0===c?void 0:null===(d=c.errors)||void 0===d?void 0:null===(i=d[0])||void 0===i?void 0:i.message;return console.error(t),e({variant:"destructive",title:t||"Something went wrong"}),!1}},M=function(){let{mode:e="add",id:t="",data:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(a=>({...a,open:!0,mode:e,id:t}));let l=p().tz(null==a?void 0:a.start,"Asia/Kolkata"),s=l.format("YYYY-MM-DD");if(console.log(s,typeof s),"edit"===e){f("name",null==a?void 0:a.name),f("map",null==a?void 0:a.map),f("isPrivate",null==a?void 0:a.isPrivate);let e=p().tz(null==a?void 0:a.start,"Asia/Kolkata");f("startDate",e.format("YYYY-MM-DD")),f("startTime",e.format("HH:mm"));let t=p().tz(null==a?void 0:a.end,"Asia/Kolkata");f("endDate",t.format("YYYY-MM-DD")),f("endTime",t.format("HH:mm")),f("venue",null==a?void 0:a.venue),f("address",null==a?void 0:a.address),f("description",null==a?void 0:a.description)}},A=e=>{let{status:t=!1}=e;t&&k(e=>!e),y(e=>({...e,open:!1})),g()},T=async t=>{var a,l,s,n,r,i,d,c;let u,v;let m={...t,start:null,end:null};(null==m?void 0:m.startDate)&&(u=p().tz("".concat(p()(null==t?void 0:t.startDate).format("Y-MM-DD")," ").concat(null==t?void 0:t.startTime),"Asia/Kolkata"),m.start=u),(null==m?void 0:m.endDate)&&(v=p().tz("".concat(p()(null==t?void 0:t.endDate).format("Y-MM-DD")," ").concat(null==t?void 0:t.endTime),"Asia/Kolkata"),m.end=v);try{let t;(null==b?void 0:b.mode)==="edit"?(t="patch",m.eventRef=null==b?void 0:b.id):t="post";let r=await o.Z[t]("/api/admin/event",m);if(!(null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.ok))return e({variant:"destructive",title:null==r?void 0:null===(n=r.data)||void 0===n?void 0:null===(s=n.errors)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:l.message}),!1;return e({description:"Successfully Updated Data"}),A({status:!0}),!0}catch(a){let t=null==a?void 0:null===(c=a.response)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:null===(i=d.errors)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.message;return console.error(t),e({variant:"destructive",title:t}),!1}},R=async t=>{var a,l,s,n,r,i,d,c;let{id:u}=t;try{let t=await o.Z.delete("/api/admin/event/".concat(u));if(!(null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.ok))return e({variant:"destructive",title:null==t?void 0:null===(n=t.data)||void 0===n?void 0:null===(s=n.errors)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:l.message}),!1;return e({description:"Successfully deleted event"}),k(e=>!e),!0}catch(a){let t=null==a?void 0:null===(c=a.response)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:null===(i=d.errors)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.message;return console.error(t),e({variant:"destructive",title:t}),!1}};return(0,l.jsxs)("div",{className:"grid gap-4 ",children:[(0,l.jsx)(r.Vq,{open:b.open,onOpenChange:e=>e?y(t=>({...t,open:e})):A({status:!1}),children:(0,l.jsxs)(r.cZ,{className:"md:max-w-[555px]",onPointerDownOutside:e=>{e.preventDefault()},children:[(0,l.jsx)(r.fK,{children:(0,l.jsxs)(r.$N,{children:["add"===b.mode?"Add":"Edit"," Event"]})}),(0,l.jsxs)("form",{children:[(0,l.jsxs)("div",{className:"grid gap-10 h-96 overflow-auto px-4 mb-4 pt-8",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{...t("name",{required:!0}),placeholder:"Event Name*",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Event Name*"}),N.name&&(0,l.jsx)("p",{className:"text-destructive",children:"Event Name is required."})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"textarea",...t("map",{required:!0}),placeholder:"Map Location*",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Map Location*"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"my-auto h-100 me-4",style:{verticalAlign:"super"},children:"Hide Event"}),(0,l.jsx)("input",{type:"checkbox",...t("isPrivate"),placeholder:"Hide Event",className:s.hG,style:{width:"20px"}})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 md:gap-4",children:[(0,l.jsxs)("div",{className:"relative ",children:[(0,l.jsx)("input",{type:"date",id:"start",...t("startDate",{valueAsDate:!0}),placeholder:"Start Date",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Start Date"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"time",...t("startTime"),placeholder:"Start Time",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Start Time"})]})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 md:gap-4",children:[(0,l.jsxs)("div",{className:"relative ",children:[(0,l.jsx)("input",{type:"date",...t("endDate",{valueAsDate:!0}),placeholder:"End Date",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"End Date"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"time",...t("endTime"),placeholder:"End Date",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"End Time"})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{...t("venue",{required:!0}),placeholder:"Venue*",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Venue*"}),N.venue&&(0,l.jsx)("p",{className:"text-destructive",children:"Venue is required."})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{...t("address"),placeholder:"Address",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Address"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"textarea",...t("description"),placeholder:"Description",className:s.hG}),(0,l.jsx)("label",{className:s.yI,children:"Description"})]})]}),(0,l.jsx)(r.cN,{children:(0,l.jsxs)(n.z,{type:"submit",onClick:m(T),children:["add"===b.mode?"Add":"Update"," Event"]})})]})]})}),(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"flex justify-between my-6",children:[(0,l.jsx)("h4",{className:"font-bold text-2xl",children:"Admin > Events"}),(0,l.jsx)("div",{children:(0,l.jsx)(n.z,{onClick:()=>M(),children:"Add Event"})})]}),(0,l.jsx)("div",{children:(0,l.jsxs)(i.iA,{children:[(0,l.jsx)(i.xD,{children:(0,l.jsxs)(i.SC,{children:[(0,l.jsx)(i.ss,{className:"w-[100px]",children:"Index"}),(0,l.jsx)(i.ss,{children:"Name"}),(0,l.jsx)(i.ss,{children:"Map"}),(0,l.jsx)(i.ss,{children:"Hidden"}),(0,l.jsx)(i.ss,{children:"Venue"}),(0,l.jsx)(i.ss,{children:"Start"}),(0,l.jsx)(i.ss,{children:"End"}),(0,l.jsx)(i.ss,{className:"text-right",children:"Action"})]})}),(0,l.jsx)(i.RM,{children:(null==D?void 0:D.length)>0&&(null==D?void 0:D.map((t,a)=>(0,l.jsxs)(i.SC,{children:[(0,l.jsxs)(i.pj,{children:[a+1," "]}),(0,l.jsx)(i.pj,{children:null==t?void 0:t.name}),(0,l.jsx)(i.pj,{children:(0,l.jsx)(x(),{href:null==t?void 0:t.map,target:"_blank",children:(0,l.jsx)(c.Z,{})})}),(0,l.jsx)(i.pj,{children:(null==t?void 0:t.isPrivate)?"Yes":"No"}),(0,l.jsx)(i.pj,{children:null==t?void 0:t.venue}),(0,l.jsx)(i.pj,{children:p()(null==t?void 0:t.start).format("lll")}),(0,l.jsx)(i.pj,{children:(null==t?void 0:t.end)?p()(null==t?void 0:t.end).format("lll"):"-"}),(0,l.jsx)(i.pj,{className:"text-right",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(n.z,{variant:"outline",size:"sm",className:"me-2 ",onClick:()=>M({mode:"edit",id:null==t?void 0:t._id,data:t}),children:(0,l.jsx)(u.Z,{size:16,className:"text-blue-500"})}),(0,l.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>{e({title:"Delete Event ".concat(null==t?void 0:t.name),description:"Once event is deleted you wont be able to get the data again",action:(0,l.jsx)(n.z,{onClick:()=>R({id:null==t?void 0:t._id}),children:"Delete"})})},children:(0,l.jsx)(v.Z,{size:16,className:"text-destructive"})})]})})]},null==t?void 0:t._id)))})]})})]})]})}},4185:function(e,t,a){"use strict";a.d(t,{aN:function(){return r},hG:function(){return l},io:function(){return n},yI:function(){return s}});let l="peer w-full px-0.5 border-0 border-b-2 border-gray-300 placeholder-transparent focus:ring-0 focus:border-purple-600",s="absolute left-0 -top-5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-1 peer-focus:-top-5 peer-focus:text-purple-600 peer-focus:text-sm",n="Something went wrong !!!",r="https://tanish-app.s3.ap-south-1.amazonaws.com/"},6620:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var l=a(4357),s=a(6439),n=a(4924),r=a(8786),i=a(5594);let d=(0,r.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:r,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,l.jsx)(u,{className:(0,i.cn)(d({variant:s,size:r,className:a})),ref:t,...c})});o.displayName="Button"},9147:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return f},Vq:function(){return d},cN:function(){return m},cZ:function(){return u},fK:function(){return v}});var l=a(4357),s=a(6439),n=a(8371),r=a(77),i=a(5594);let d=n.fC;n.xz;let o=n.h_;n.x8;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=n.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{}),(0,l.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,(0,l.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(r.Pxu,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let v=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};v.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=n.Dx.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});f.displayName=n.dk.displayName},8769:function(e,t,a){"use strict";a.d(t,{RM:function(){return d},SC:function(){return c},iA:function(){return r},pj:function(){return v},ss:function(){return u},xD:function(){return i}});var l=a(4357),s=a(6439),n=a(5594);let r=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});r.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})});o.displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});c.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})});u.displayName="TableHead";let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})});v.displayName="TableCell";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})});m.displayName="TableCaption"},5594:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var l=a(3501),s=a(2701);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m)((0,l.W)(t))}}},function(e){e.O(0,[545,202,418,409,956,710,759,78,381,895,478,331,702,431,744],function(){return e(e.s=5891)}),_N_E=e.O()}]);