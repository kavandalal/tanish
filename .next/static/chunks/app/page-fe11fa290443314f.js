(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1096:function(e,t,s){Promise.resolve().then(s.bind(s,5167))},5167:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var l=s(4357),a=s(2091),i=s(8895),r=s(7684),n=s(7094),o=s(6439),d=s(4185);function u(){let{toast:e}=(0,n.pm)(),t=(0,a.useRouter)(),s=(0,a.useSearchParams)(),[u,c]=(0,o.useState)("true"),{register:p,watch:m,handleSubmit:h,setValue:v,formState:{errors:x}}=(0,i.cI)(),[f,b]=(0,o.useState)(1);(0,o.useEffect)(()=>{b(1)},[]);let g=()=>{let e=s.get("redirect");t.push(e||"/feed")},N=async(t,s)=>{var l,a,i,n,o,d,u,p,m,h,x,N,j,y,S;null==s||s.preventDefault(),c("loading"),console.log("form getting triggered");let w={...t,name:null==t?void 0:null===(a=t.name)||void 0===a?void 0:null===(l=a.split(" "))||void 0===l?void 0:l.map(e=>"".concat(e.charAt(0)).concat(e.slice(1))).join(" ")};try{let t;if(!(null==(t=1===f?await r.Z.post("/api/auth/register/check",w):await r.Z.post("/api/auth/register",w))?void 0:null===(i=t.data)||void 0===i?void 0:i.ok))return e({variant:"destructive",title:null==t?void 0:null===(x=t.data)||void 0===x?void 0:null===(h=x.errors)||void 0===h?void 0:null===(m=h[0])||void 0===m?void 0:m.message}),!1;if(null==t?void 0:null===(o=t.data)||void 0===o?void 0:null===(n=o.packet)||void 0===n?void 0:n.next){b(2),v("email",w.email),v("phone",w.phone),e({description:"Some more basic info"});return}return e({description:"Successfully loggedin"}),localStorage.setItem("userID",null==t?void 0:null===(p=t.data)||void 0===p?void 0:null===(u=p.packet)||void 0===u?void 0:null===(d=u.user)||void 0===d?void 0:d._id),g(),!0}catch(s){let t=null==s?void 0:null===(S=s.response)||void 0===S?void 0:null===(y=S.data)||void 0===y?void 0:null===(j=y.errors)||void 0===j?void 0:null===(N=j[0])||void 0===N?void 0:N.message;return console.error(t),e({variant:"destructive",title:t}),!1}finally{c("true")}};return(0,l.jsx)("div",{className:"",children:(0,l.jsx)("div",{className:"relative min-h-screen bg-purple-100 backdrop-blur flex justify-center items-center bg-texture bg-cover py-28 sm:py-0",children:(0,l.jsx)("div",{className:"p-4 sm:p-8 flex-1 ",children:(0,l.jsxs)("div",{className:"max-w-[420px] min-w-[320px] bg-white rounded-b-3xl mx-auto",children:[(0,l.jsx)("div",{className:"relative h-auto",children:(0,l.jsx)("svg",{className:"absolute -top-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:(0,l.jsx)("path",{fill:"#fff",fillOpacity:"1",d:"M0,64L48,80C96,96,192,128,288,128C384,128,480,96,576,85.3C672,75,768,85,864,122.7C960,160,1056,224,1152,245.3C1248,267,1344,245,1392,234.7L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})})}),(0,l.jsxs)("div",{className:"px-10 pt-4 pb-8 rounded-3xl shadow-xl",children:[(0,l.jsx)("div",{className:"mx-auto text-center",children:(0,l.jsx)("h1",{className:"text-3xl text-gray-800 h-20",children:"Basic Info"})}),1===f&&(0,l.jsxs)("form",{onSubmit:h(N),className:"grid gap-10",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"email",...p("email",{validate:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}),placeholder:"Email",className:d.hG}),(0,l.jsx)("label",{className:d.yI,children:"Email"})]}),(0,l.jsx)("button",{type:"submit",disabled:"loading"===u,className:"w-full mt-6 py-4 text-lg text-white font-semibold text-center rounded-full bg-purple-500 transition-all hover:bg-purple-600 focus:outline-none",children:"Enter"})]}),2===f&&(0,l.jsxs)("form",{onSubmit:h(N),className:"grid gap-10",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{...p("name",{required:!0}),placeholder:"Full Name",className:d.hG}),(0,l.jsx)("label",{className:d.yI,children:"Full Name"}),x.name&&(0,l.jsx)("p",{className:"text-destructive",children:"Name is required."})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"email",...p("email",{required:!0,validate:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}),placeholder:"Email",className:d.hG}),(0,l.jsx)("label",{className:d.yI,children:"Email"}),x.email&&(0,l.jsx)("p",{className:"text-destructive",children:"Email address is required."})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"tel",...p("phone",{valueAsNumber:!0}),placeholder:"Phone Number",className:d.hG}),(0,l.jsx)("label",{className:d.yI,children:"Phone Number"}),x.phone&&(0,l.jsx)("p",{className:"text-estructive",children:"Phone Number is required."})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{...p("side"),className:d.hG,children:[(0,l.jsx)("option",{value:"bride",children:"Ladkiwale (Bride)"}),(0,l.jsx)("option",{value:"groom",children:"Ladkewale (Groom)"})]}),(0,l.jsx)("label",{className:d.yI,children:"You belong from"})]}),(0,l.jsx)("button",{type:"submit",disabled:"loading"===u,className:"w-full mt-6 py-4 text-lg text-white font-semibold text-center rounded-full bg-purple-500 transition-all hover:bg-purple-600 focus:outline-none",children:"Enter"})]})]})]})})})})}},4185:function(e,t,s){"use strict";s.d(t,{aN:function(){return r},hG:function(){return l},io:function(){return i},yI:function(){return a}});let l="peer w-full px-0.5 border-0 border-b-2 border-gray-300 placeholder-transparent focus:ring-0 focus:border-purple-600",a="absolute left-0 -top-5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-1 peer-focus:-top-5 peer-focus:text-purple-600 peer-focus:text-sm",i="Something went wrong !!!",r="https://tanish-app.s3.ap-south-1.amazonaws.com/"},7094:function(e,t,s){"use strict";s.d(t,{Am:function(){return c},pm:function(){return p}});var l=s(6439);let a=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function u(e){d=n(d,e),o.forEach(e=>{e(d)})}function c(e){let{...t}=e,s=(a=(a+1)%Number.MAX_VALUE).toString(),l=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||l()}}}),{id:s,dismiss:l,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,t]=l.useState(d);return l.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},2091:function(e,t,s){e.exports=s(2810)}},function(e){e.O(0,[409,895,702,431,744],function(){return e(e.s=1096)}),_N_E=e.O()}]);