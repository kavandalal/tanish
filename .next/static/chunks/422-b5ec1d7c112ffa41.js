(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{4185:function(e,t,o){"use strict";o.d(t,{aN:function(){return l},hG:function(){return n},io:function(){return i},yI:function(){return r}});let n="peer w-full px-0.5 border-0 border-b-2 border-gray-300 placeholder-transparent focus:ring-0 focus:border-purple-600",r="absolute left-0 -top-5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-1 peer-focus:-top-5 peer-focus:text-purple-600 peer-focus:text-sm",i="Something went wrong !!!",l="https://tanish-app.s3.ap-south-1.amazonaws.com/"},6620:function(e,t,o){"use strict";o.d(t,{z:function(){return s}});var n=o(4357),r=o(6439),i=o(4924),l=o(8786),a=o(5594);let d=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),s=r.forwardRef((e,t)=>{let{className:o,variant:r,size:l,asChild:s=!1,...u}=e,c=s?i.g7:"button";return(0,n.jsx)(c,{className:(0,a.cn)(d({variant:r,size:l,className:o})),ref:t,...u})});s.displayName="Button"},3813:function(e,t,o){"use strict";o.d(t,{J2:function(){return a}});var n=o(4357),r=o(6439),i=o(5219),l=o(5594);let a=i.fC;i.xz,i.ee;let d=r.forwardRef((e,t)=>{let{className:o,align:r="center",sideOffset:a=4,...d}=e;return(0,n.jsx)(i.h_,{children:(0,n.jsx)(i.VY,{ref:t,align:r,sideOffset:a,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...d})})});d.displayName=i.VY.displayName},7097:function(e,t,o){"use strict";o.d(t,{Z:function(){return w}});var n=o(4357),r=o(4293);let i=(0,r.Z)("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]),l=(0,r.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var a=o(4104),d=o(9940),s=o(6620),u=o(6439),c=o(7094),v=o(3372),f=o.n(v),p=o(111),h=o.n(p),m=o(7684),g=o(3813),x=o(5219),y=o(4185),b=o(1846),w=function(e){var t,o,r,v,p;let{data:w,setCallApi:j}=e,{toast:k}=(0,c.pm)(),[N,S]=(0,u.useState)(),[A,T]=(0,u.useState)(!1),_=localStorage.getItem("userID");(0,u.useEffect)(()=>{var e,t;console.log(null==w?void 0:w.likes);let o="string"==typeof(null==w?void 0:null===(e=w.likes)||void 0===e?void 0:e[0])?null==w?void 0:w.likes:null==w?void 0:null===(t=w.likes)||void 0===t?void 0:t.map(e=>null==e?void 0:e._id);S(o),(null==o?void 0:o.includes(_))&&T(!0)},[]);let O=async()=>{var e,t,o,n,r,i,l,a;try{let r=null==N?void 0:N.indexOf(_),i={mode:-1!==r?"delete":"add"},l=await m.Z.patch("/api/post/action/like/".concat(null==w?void 0:w._id),i);if(!(null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.ok))return k({variant:"destructive",title:null==l?void 0:null===(n=l.data)||void 0===n?void 0:null===(o=n.errors)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.message}),!1;return(null==i?void 0:i.mode)==="add"?(S(e=>{var t,o;return[...e,null==l?void 0:null===(o=l.data)||void 0===o?void 0:null===(t=o.packet)||void 0===t?void 0:t.updated]}),T(!0)):(S(e=>[...e.slice(0,r),...e.slice(r+1)]),T(!1)),!0}catch(t){let e=null==t?void 0:null===(a=t.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:null===(i=l.errors)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.message;return console.error(e),k({variant:"destructive",title:e||"Something went wrong"}),!1}},E=async e=>{var t,o,n,r,i,l,a,d;try{let i=await m.Z.delete("/api/post/action/".concat(e));if(!(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.ok))return k({variant:"destructive",title:null==i?void 0:null===(r=i.data)||void 0===r?void 0:null===(n=r.errors)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.message}),!1;j&&j(e=>!e)}catch(t){let e=null==t?void 0:null===(d=t.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:null===(l=a.errors)||void 0===l?void 0:null===(i=l[0])||void 0===i?void 0:i.message;return console.error(e),k({variant:"destructive",title:e||"Something went wrong"}),!1}},z=async e=>{var t,o,n,r,i,l,a,d;try{let i=await m.Z.get("/api/post/action/download/".concat(e));if(!(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.ok))return k({variant:"destructive",title:null==i?void 0:null===(r=i.data)||void 0===r?void 0:null===(n=r.errors)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.message}),!1}catch(t){let e=null==t?void 0:null===(d=t.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:null===(l=a.errors)||void 0===l?void 0:null===(i=l[0])||void 0===i?void 0:i.message;return console.error(e),k({variant:"destructive",title:e||"Something went wrong"}),!1}};return(0,n.jsxs)("div",{className:"group flex flex-col relative overflow-hidden mb-4 border-opacity-5 rounded-2xl z-10 post-shadow",children:[(0,n.jsx)("div",{className:"p-4 capitalize font-semibold text-lg",children:(0,n.jsx)(h(),{target:"_self",href:"/profile/".concat(null==w?void 0:null===(t=w.createdBy)||void 0===t?void 0:t._id),children:(null==w?void 0:w.createdBy)&&(null==w?void 0:null===(o=w.createdBy)||void 0===o?void 0:o.name)})}),(0,n.jsxs)(g.J2,{children:[(0,n.jsx)(x.xo,{className:"absolute top-2 right-2 p-2 shadow-md bg-[hsl(var(--background))] rounded-lg",children:(0,n.jsx)(a.Z,{})}),(0,n.jsx)(x.yk,{className:"duration-500 max-w-fit animate-in text-[hsl(var(--foreground))]",children:(0,n.jsxs)("div",{className:"flex flex-col ",children:[(0,n.jsxs)(s.z,{variant:"outline",type:"button",onClick:()=>{(0,b.GN)({source:null==w?void 0:w.source,caption:null==w?void 0:w.caption}),z(null==w?void 0:w._id)},className:"flex justify-between w-[140px] bg-[hsl(var(--background))]",children:[(0,n.jsx)(i,{color:"green"}),(0,n.jsx)("span",{className:"",children:"Download "})]}),_===(null==w?void 0:null===(r=w.createdBy)||void 0===r?void 0:r._id)&&(0,n.jsxs)(s.z,{variant:"outline",type:"button",onClick:()=>E(null==w?void 0:w._id),className:"flex justify-between w-[140px] bg-[hsl(var(--background))]",children:[(0,n.jsx)(d.Z,{color:"red"}),(0,n.jsx)("span",{className:"",children:"Delete "})]})]})})]}),(0,n.jsx)(h(),{target:"_self",href:"/feed/".concat(null==w?void 0:w._id),className:"flex justify-center items-center flex-grow",children:(0,n.jsx)(f(),{width:200,height:200,className:"object-contain w-full h-100",style:{maxHeight:"500px"},src:"".concat(y.aN).concat(null==w?void 0:w.source),alt:"",priority:!0})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("div",{className:"p-4 rounded-md flex items-center text-[hsl(var(--foreground))] ",children:null==w?void 0:w.caption}),(0,n.jsxs)("div",{className:"flex justify-start items-center my-3 me-3 flex-col",children:[(0,n.jsx)(s.z,{size:"sm",className:"bg-background ".concat(A?"text-destructive":"text-foreground","  hover:text-background"),onClick:O,children:(0,n.jsx)(l,{fill:A?"red":"none"})}),(0,n.jsxs)("div",{className:"text-foreground w-full text-center text-xs opacity-80",children:[(null==N?void 0:N.length)>0&&"".concat(null==N?void 0:N.length," like")," "]})]})]}),(null==w?void 0:null===(v=w.likes)||void 0===v?void 0:v.length)>0&&"string"!=typeof(null==w?void 0:w.likes[0])&&(0,n.jsxs)("div",{className:"my-3 px-4 text-sm",children:[(0,n.jsx)("div",{className:"opacity-70",children:"Liked By"}),(0,n.jsx)("div",{children:null==w?void 0:null===(p=w.likes)||void 0===p?void 0:p.map(e=>(0,n.jsx)("div",{className:"capitalize ",children:null==e?void 0:e.name},null==e?void 0:e._id))})]})]})}},7094:function(e,t,o){"use strict";o.d(t,{Am:function(){return c},pm:function(){return v}});var n=o(6439);let r=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:o}=t;return o?l(o):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===o||void 0===o?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],s={toasts:[]};function u(e){s=a(s,e),d.forEach(e=>{e(s)})}function c(e){let{...t}=e,o=(r=(r+1)%Number.MAX_VALUE).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:o});return u({type:"ADD_TOAST",toast:{...t,id:o,open:!0,onOpenChange:e=>{e||n()}}}),{id:o,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:o}})}}function v(){let[e,t]=n.useState(s);return n.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},1846:function(e,t,o){"use strict";o.d(t,{Ad:function(){return a},Br:function(){return d},Dl:function(){return l},GN:function(){return u}});var n=o(4185),r=o(7094),i=o(7684);let l=async e=>{if(!e)return!1;try{if(e instanceof Blob){let t=new FileReader,o=await new Promise((o,n)=>{t.onload=e=>{e.target&&e.target.result?o(e.target.result):n(Error("No event target or result"))},t.readAsDataURL(e)});return o}throw Error("Image is not in Blob format")}catch(e){return!1}},a=e=>{if(!e)return!1;let t=e=>-1!==e.indexOf("data:"),o=async e=>{let t=await fetch(e),o=t.blob();return o},n=async()=>{try{if(!e)throw Error("No preview provided");return t(e)?function(e){let[,t,o]=e.match(/^data:(.*?);base64,(.*)$/)||[],n=atob(o),r=new ArrayBuffer(n.length),i=new Uint8Array(r);for(let e=0;e<n.length;e+=1)i[e]=n.charCodeAt(e);return new Blob([r],{type:t})}(e):await o(e)}catch(e){return(0,r.Am)({variant:"destructive",title:e.message||"Something went wrong!!!"}),!1}};return n()},d=async e=>{try{let t=await fetch(e),o=await t.blob();return o}catch(e){return Error(null==e?void 0:e.message)}},s=e=>-1!==e.indexOf(n.aN)?e.split(".").pop():e.substring(11,e.indexOf(";base64")).trim(),u=async e=>{let{source:t,caption:o}=e,n="https://tanish-app.s3.ap-south-1.amazonaws.com/".concat(t),r=await (0,i.Z)({url:n,method:"GET",responseType:"blob"}).catch(e=>{throw e}),l=s(n);c({fileBlob:null==r?void 0:r.data,fileName:o,fileType:l||"png"})},c=e=>{let{fileBlob:t,fileName:o,fileType:n}=e,r=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=r,i.setAttribute("download","".concat(o,".").concat(n)),document.body.appendChild(i),i.click(),i.remove(),i.style.display="none",window.URL.revokeObjectURL(r)}},5594:function(e,t,o){"use strict";o.d(t,{cn:function(){return i}});var n=o(3501),r=o(2701);function i(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,r.m)((0,n.W)(t))}},2091:function(e,t,o){e.exports=o(2810)}}]);